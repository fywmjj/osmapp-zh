{"version":3,"file":"static/chunks/3635.d9c36cf0f6e51be9.js","mappings":"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","sources":["webpack://_N_E/./src/components/FeaturePanel/Climbing/CameraMarker.tsx","webpack://_N_E/./src/components/FeaturePanel/Climbing/CragMap.tsx"],"sourcesContent":["import React from 'react';\ntype CameraTopDownMarkerProps = {\n  width?: number;\n  height?: number;\n  index?: number;\n  azimuth?: number;\n  onClick?: () => void;\n};\nexport const CameraMarker = ({\n  width,\n  height,\n  azimuth = 0,\n  index,\n  onClick\n}: CameraTopDownMarkerProps) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 55 55\" role=\"img\" height={height} width={width} data-sentry-element=\"svg\" data-sentry-component=\"CameraMarker\" data-sentry-source-file=\"CameraMarker.tsx\">\n    <g transform=\"translate(11.5,11.5)\" cursor=\"pointer\" onClick={onClick} data-sentry-element=\"g\" data-sentry-source-file=\"CameraMarker.tsx\">\n      <g transform={`rotate(${azimuth},16,16) translate(16,16) scale(2) translate(-16,-16)`} data-sentry-element=\"g\" data-sentry-source-file=\"CameraMarker.tsx\">\n        <polygon points=\"16,2 10,14 22,14\" fill=\"white\" data-sentry-element=\"polygon\" data-sentry-source-file=\"CameraMarker.tsx\" />\n      </g>\n\n      <path fill=\"#000\" d=\"M26 7h-3.465l-1.704-2.555A1 1 0 0 0 20 4h-8a1 1 0 0 0-.831.445L9.464 7H6a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h20a3 3 0 0 0 3-3V10a3 3 0 0 0-3-3Z\" data-sentry-element=\"path\" data-sentry-source-file=\"CameraMarker.tsx\" />\n\n      <text fill=\"white\" x={12} y={23} fontWeight=\"bold\" data-sentry-element=\"text\" data-sentry-source-file=\"CameraMarker.tsx\">\n        {index}\n      </text>\n    </g>\n  </svg>;","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport maplibregl, { GeoJSONSource, LngLatLike, PointLike } from 'maplibre-gl';\nimport { outdoorStyle } from '../../Map/styles/outdoorStyle';\nimport { COMPASS_TOOLTIP } from '../../Map/useAddTopRightControls';\nimport styled from '@emotion/styled';\nimport { useFeatureContext } from '../../utils/FeatureContext';\nimport type { LayerSpecification } from '@maplibre/maplibre-gl-style-spec';\nimport { CircularProgress } from '@mui/material';\nimport { useClimbingContext } from './contexts/ClimbingContext';\nimport { addFilePrefix } from './utils/photo';\nimport ReactDOMServer from 'react-dom/server';\nimport { CameraMarker } from './CameraMarker';\nconst Map = styled.div<{\n  $isVisible: boolean;\n}>`\n  visibility: ${({\n  $isVisible\n}) => $isVisible ? 'visible' : 'hidden'};\n  height: 100%;\n  width: 100%;\n`;\nconst LoadingContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n`;\nconst emptyGeojson = {\n  type: 'geojson' as const,\n  data: {\n    type: 'FeatureCollection' as const,\n    features: []\n  }\n};\nexport const routes: LayerSpecification[] = [{\n  id: 'climbing-3-routes-circle',\n  type: 'circle',\n  source: 'climbing',\n  paint: {\n    'circle-color': ['case', ['boolean', ['feature-state', 'hover'], false], '#4150a0', '#ea5540'],\n    'circle-radius': 4\n  }\n} as LayerSpecification, {\n  id: 'climbing-3-routes-labels',\n  type: 'symbol',\n  source: 'climbing',\n  layout: {\n    'text-padding': 2,\n    'text-font': ['Noto Sans Medium'],\n    'text-anchor': 'left',\n    'text-field': '{name} {grade}',\n    'text-offset': [1, 0],\n    'text-size': 14,\n    'text-max-width': 9,\n    'text-allow-overlap': false,\n    'text-optional': true\n  },\n  paint: {\n    'text-halo-blur': 0.5,\n    'text-color': '#666',\n    'text-halo-width': 1,\n    'text-halo-color': '#ffffff'\n  }\n}];\nconst useGetPhotoExifs = photoPaths => {\n  const [photoExifs, setPhotoExifs] = useState<Record<string, Record<string, any>>>({});\n  useEffect(() => {\n    async function fetchExifData(photos) {\n      const encodedTitles = photos.map(t => addFilePrefix(t)).join('|');\n      const url = `https://commons.wikimedia.org/w/api.php?action=query&prop=imageinfo&iiprop=metadata&titles=${encodedTitles}&format=json&origin=*`;\n      const response = await fetch(url);\n      const data = await response.json();\n      return data.query.pages;\n    }\n    fetchExifData(photoPaths).then(pages => {\n      const data = Object.values(pages).reduce<Record<string, any>>((acc, item: any) => {\n        const metadata = item?.imageinfo?.[0]?.metadata.reduce((acc2, {\n          name,\n          value\n        }) => ({\n          ...acc2,\n          [name]: value\n        }), {});\n        return {\n          ...acc,\n          [item.title]: metadata\n        };\n      }, {});\n      setPhotoExifs(data);\n    });\n  }, [photoPaths]);\n  return photoExifs;\n};\nfunction parseFractionOrNumber(input) {\n  if (input.includes('/')) {\n    const [numerator, denominator] = input.split('/');\n    return parseFloat(numerator) / parseFloat(denominator);\n  } else {\n    return parseFloat(input);\n  }\n}\nconst usePhotoMarkers = (photoExifs, mapRef) => {\n  const {\n    feature\n  } = useFeatureContext();\n  const getMarker = useCallback((index: number, azimuth: number | null) => {\n    let svgElement;\n    // const photoPath = Object.keys(photoExifs)[index];\n    if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n      svgElement = document.createElement('div');\n      svgElement.innerHTML = ReactDOMServer.renderToStaticMarkup(<CameraMarker width={30} index={index} azimuth={azimuth} onClick={() => {\n        // @TODO onclick is not working\n        // Router.push(\n        //   `${getOsmappLink(feature)}/climbing/photo/${photoPath}${window.location.hash}`,\n        // );\n      }} />);\n    } else svgElement = undefined;\n    return {\n      color: 'salmon',\n      element: svgElement,\n      offset: [0, -10] as PointLike\n    };\n  }, []);\n  const markerRef = useRef<maplibregl.Marker>();\n  useEffect(() => {\n    Object.keys(photoExifs).map((key, index) => {\n      const exifItems = photoExifs[key];\n      if (exifItems && exifItems.GPSLongitude && exifItems.GPSLatitude) {\n        const marker = getMarker(index, exifItems.GPSImgDirection ? parseFractionOrNumber(exifItems.GPSImgDirection) : null);\n        markerRef.current = new maplibregl.Marker(marker).setLngLat([exifItems.GPSLongitude, exifItems.GPSLatitude] as LngLatLike).addTo(mapRef.current);\n      }\n    });\n    return () => {\n      Object.keys(photoExifs).map(key => {\n        markerRef.current?.remove();\n      });\n    };\n  }, [getMarker, mapRef, markerRef, photoExifs]);\n};\nconst useInitMap = () => {\n  const containerRef = useRef(null);\n  const mapRef = useRef<maplibregl.Map>(null);\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n  const [isFirstMapLoad, setIsFirstMapLoad] = useState(true);\n  const {\n    feature\n  } = useFeatureContext();\n  const {\n    photoPaths\n  } = useClimbingContext();\n  const photoExifs = useGetPhotoExifs(photoPaths);\n  usePhotoMarkers(photoExifs, mapRef);\n  const getClimbingSource = useCallback(() => mapRef.current.getSource('climbing') as GeoJSONSource | undefined, []);\n  useEffect(() => {\n    const geolocation = new maplibregl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      fitBoundsOptions: {\n        duration: 4000\n      },\n      trackUserLocation: true\n    });\n    setIsMapLoaded(false);\n    if (!containerRef.current) return undefined;\n    const map = new maplibregl.Map({\n      container: containerRef.current,\n      style: {\n        ...outdoorStyle,\n        layers: [...outdoorStyle.layers, ...routes],\n        sources: {\n          ...outdoorStyle.sources,\n          climbing: emptyGeojson\n        }\n      },\n      attributionControl: false,\n      refreshExpiredTiles: false,\n      locale: {\n        'NavigationControl.ResetBearing': COMPASS_TOOLTIP\n      }\n    });\n    map.scrollZoom.setWheelZoomRate(1 / 200); // 1/450 is default, bigger value = faster\n    map.addControl(geolocation);\n    mapRef.current = map;\n    mapRef.current.on('load', () => {\n      setIsMapLoaded(true);\n    });\n    return () => {\n      if (map) {\n        map.remove();\n      }\n    };\n  }, [containerRef]);\n  useEffect(() => {\n    mapRef.current?.on('load', () => {\n      if (isFirstMapLoad) {\n        mapRef.current.jumpTo({\n          center: feature.center,\n          zoom: 18.5\n        });\n        getClimbingSource()?.setData({\n          type: 'FeatureCollection' as const,\n          features: transformMemberFeaturesToGeojson(feature.memberFeatures)\n        });\n        setIsFirstMapLoad(false);\n      }\n    });\n  }, [feature.center, feature.memberFeatures, getClimbingSource, isFirstMapLoad]);\n  return {\n    containerRef,\n    isMapLoaded\n  };\n};\nconst transformMemberFeaturesToGeojson = features => {\n  return features.map(feature => ({\n    ...feature,\n    properties: {\n      ...feature.properties,\n      name: feature.tags.name,\n      grade: feature.tags['climbing:grade:uiaa']\n    },\n    geometry: feature.osmMeta.type === 'node' ? {\n      coordinates: feature.center,\n      type: 'Point'\n    } : undefined\n  }));\n};\nconst CragMap = () => {\n  const {\n    containerRef,\n    isMapLoaded\n  } = useInitMap();\n  return <Container data-sentry-element=\"Container\" data-sentry-component=\"CragMap\" data-sentry-source-file=\"CragMap.tsx\">\n      {!isMapLoaded && <LoadingContainer>\n          <CircularProgress color=\"primary\" />\n        </LoadingContainer>}\n      <Map $isVisible={isMapLoaded} ref={containerRef} data-sentry-element=\"Map\" data-sentry-source-file=\"CragMap.tsx\" />\n    </Container>;\n};\nexport default CragMap; // dynamic import"],"names":["CameraMarker","width","height","azimuth","index","onClick","svg","xmlns","fill","viewBox","role","data-sentry-element","data-sentry-component","data-sentry-source-file","g","transform","cursor","polygon","points","path","d","text","x","y","fontWeight","styled","$isVisible","LoadingContainer","Container","emptyGeojson","type","data","features","routes","id","source","paint","layout","photoPaths","photoExifs","setPhotoExifs","useState","useEffect","fetchExifData","encodedTitles","photos","map","t","addFilePrefix","join","response","fetch","json","query","pages","then","Object","values","reduce","acc","item","metadata","imageinfo","acc2","name","value","title","usePhotoMarkers","mapRef","feature","useFeatureContext","getMarker","useCallback","svgElement","document","createElement","innerHTML","ReactDOMServer","undefined","color","element","offset","markerRef","useRef","keys","key","exifItems","GPSLongitude","GPSLatitude","marker","GPSImgDirection","parseFractionOrNumber","input","includes","parseFloat","numerator","denominator","split","current","maplibregl","setLngLat","addTo","remove","useInitMap","containerRef","isMapLoaded","setIsMapLoaded","isFirstMapLoad","setIsFirstMapLoad","useClimbingContext","useGetPhotoExifs","getClimbingSource","getSource","geolocation","positionOptions","enableHighAccuracy","fitBoundsOptions","duration","trackUserLocation","container","style","outdoorStyle","layers","sources","climbing","attributionControl","refreshExpiredTiles","locale","COMPASS_TOOLTIP","scrollZoom","setWheelZoomRate","addControl","on","jumpTo","center","zoom","setData","transformMemberFeaturesToGeojson","memberFeatures","properties","tags","grade","geometry","osmMeta","coordinates","CragMap","CircularProgress","Map","ref"],"sourceRoot":""}