!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2e81ff8a-dd37-4f6c-af16-1306e455e386",e._sentryDebugIdIdentifier="sentry-dbid-2e81ff8a-dd37-4f6c-af16-1306e455e386")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6198],{48795:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>tv});var n=r(18153),a=r(39138),o=r(14232);let i=(0,o.createContext)(void 0),l=e=>{let{children:t}=e,[r,a]=(0,o.useState)(!1),[l,s]=(0,o.useState)("car"),[c,d]=(0,o.useState)(null),[u,p]=(0,o.useState)([]);return(0,n.Y)(i.Provider,{value:{loading:r,setLoading:a,mode:l,setMode:s,result:c,setResult:d,points:u,setPoints:p},"data-sentry-element":"unknown","data-sentry-component":"DirectionsProvider","data-sentry-source-file":"DirectionsContext.tsx",children:t})},s=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("useDirectionsContext must be used within a DirectionsProvider");return e};var c=r(98975),d=r(40359),u=r(86422),p=r(58311),y=r(82777),f=r(14259),h=r(82097),m=r(46257),g=r(27218),x=r(42799),v=r(28888),A=r(31503),Y=r(89099),w=r.n(Y),b=r(69585),k=r(75807),D=r(8460);let C=e=>{if("coords"===e.type)return e.coords.center;if("star"===e.type)return e.star.center;if("geocoder"===e.type)return e.geocoder.geometry.coordinates;throw Error("Unsupported option type: ".concat(e.type))};var F=r(71710);function S(){let e=(0,v._)(["/directions/","/",""]);return S=function(){return e},e}let I=e=>{if(!e)return[void 0,void 0];let t=e.indexOf("~");return -1===t?[e,void 0]:[e.slice(0,t),e.slice(t+1)]},R=e=>{let t=C(e);return"".concat(t.join(","),"~").concat((0,F.O)(e))},M=(e,t)=>{let r=t.map(R).join("/");return(0,A.W)(S(),e,r)},T=e=>e.split(",").map(Number),_=e=>e.map(e=>{let[t,r]=I(e);return(0,D.C9)(T(t),r)}),O=()=>{w().push("/")},B=()=>(0,n.Y)(b.A,{onClick:O,size:"small","aria-label":"close","data-sentry-element":"IconButton","data-sentry-component":"CloseButton","data-sentry-source-file":"helpers.tsx",children:(0,n.Y)(k.A,{fontSize:"small","data-sentry-element":"CloseIcon","data-sentry-source-file":"helpers.tsx"})}),E=e=>e<1e3?"".concat(Math.round(e)," m"):"".concat((e/1e3).toFixed(1)," km"),P=e=>{let t=621371192e-12*e;return t<1?"".concat(Math.round(5280*t)," ft"):"".concat(t.toFixed(1)," mi")},j=(e,t)=>e?P(t):E(t);var L=r(25282),z=r(20735),W=r(8824),N=r(26809),H=r(53445),$=r(2608),K=r(75100),Z=r(30896),q=r(56725),G=r(90757),U=r(37984),V=r(99789),X=r(90845),J=r(55439),Q=r(98728),ee=r(52003);let et=e=>{switch(e){case -3:return ee.A;case -2:return z.A;case -1:return W.A;case 0:return N.A;case 1:return H.A;case 2:return $.A;case 3:return K.A;case 4:return Z.A;case 5:return q.A;case 6:return G.A;case -7:return U.A;case 7:return V.A;case -98:case -8:return X.A;case 8:return J.A;default:return Q.A}};var er=r(42008),en=r(21398);let ea=e=>{let{distance:t}=e,{userSettings:r}=(0,L.dk)(),{isImperial:a}=r;return(0,n.Y)(n.FK,{children:j(a,t)})},eo=e=>{let{sign:t}=e,r=et(t);return(0,n.Y)(r,{fontSize:"large","data-sentry-element":"Component","data-sentry-component":"Icon","data-sentry-source-file":"Instructions.tsx"})},ei=(0,c.A)("li",{target:"ets1rip0"})("display:flex;flex-direction:column;gap:0.25rem;"),el=e=>{let{instruction:t}=e,r=(0,en.u)();return(0,n.FD)(ei,{"data-sentry-element":"StyledListItem","data-sentry-component":"Instruction","data-sentry-source-file":"Instructions.tsx",children:[(0,n.FD)(d.A,{direction:"row",alignItems:"center","data-sentry-element":"Stack","data-sentry-source-file":"Instructions.tsx",children:[(0,n.Y)(er.A,{width:r.spacing(6),"data-sentry-element":"Box","data-sentry-source-file":"Instructions.tsx",children:(0,n.Y)(eo,{sign:t.sign,"data-sentry-element":"Icon","data-sentry-source-file":"Instructions.tsx"})}),(0,n.Y)(y.A,{variant:"subtitle1",fontWeight:700,"data-sentry-element":"Typography","data-sentry-source-file":"Instructions.tsx",children:t.street_name||t.text})]}),t.distance>0&&(0,n.FD)(d.A,{direction:"row",alignItems:"center",spacing:2,ml:6,children:[(0,n.Y)(y.A,{noWrap:!0,color:"textSecondary",variant:"body2",style:{overflow:"visible"},children:(0,n.Y)(ea,{distance:t.distance})}),(0,n.Y)(d.A,{flex:1,children:(0,n.Y)(h.A,{})})]})]})},es=(0,c.A)("ul",{target:"ets1rip1"})("list-style:none;padding:0;max-height:100%;display:flex;flex-direction:column;gap:0.25rem;"),ec=e=>{let{instructions:t}=e;return(0,n.Y)(es,{"data-sentry-element":"StyledList","data-sentry-component":"Instructions","data-sentry-source-file":"Instructions.tsx",children:t.map(e=>(0,n.Y)(el,{instruction:e},"".concat(e.time,"-").concat(e.text)))})},ed=(0,c.A)(p.A,{shouldForwardProp:e=>!e.startsWith("$"),target:"e17cpf2j0"})("background-color:",e=>{let{theme:t}=e;return(0,m.c)(t.palette.background.paper,.8)},";-webkit-backdrop-filter:blur(35px);backdrop-filter:blur(35px);padding:",e=>{let{theme:t}=e;return t.spacing(1.5)},";height:",e=>{let{$height:t}=e;return t},";overflow-y:",e=>{let{$overflow:t}=e;return t},";"),eu=(0,c.A)(p.A,{target:"e17cpf2j1"})("backdrop-filter:blur(10px);background:",e=>{let{theme:t}=e;return(0,m.c)(t.palette.background.paper,.9)},";padding:",e=>{let{theme:t}=e;return t.spacing(1)}," ",e=>{let{theme:t}=e;return t.spacing(2)}," ",e=>{let{theme:t}=e;return t.spacing(.5)}," ",e=>{let{theme:t}=e;return t.spacing(2)},";text-align:center;height:100%;overflow-y:auto;"),ep=(0,c.A)("div",{target:"e17cpf2j2"})("position:absolute;top:0;right:0;"),ey=e=>{let t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?"".concat(t,":").concat(r<10?"0".concat(r):r," h"):"".concat(r," min")},ef=e=>{let{result:t}=e;return(0,n.Y)(y.A,{variant:"caption",component:"div","data-sentry-element":"Typography","data-sentry-component":"PoweredBy","data-sentry-source-file":"Result.tsx",children:(0,n.Y)(x.wD,{id:"directions.powered_by",values:{link:"<a href=".concat(t.link,">").concat(t.router,"</a>")},"data-sentry-element":"Translation","data-sentry-source-file":"Result.tsx"})})},eh=e=>{let{revealForm:t,time:r,distance:a,ascent:i}=e,[l,c]=(0,o.useState)(!1),{result:u}=s();return(0,n.FD)(eu,{elevation:3,"data-sentry-element":"StyledPaperMobile","data-sentry-component":"MobileResult","data-sentry-source-file":"Result.tsx",children:[(0,n.FD)("div",{children:[t&&(0,n.Y)(ep,{children:(0,n.Y)(B,{})}),(0,n.Y)("strong",{children:a})," • ",(0,n.Y)("strong",{children:r})," • ↑",i,(0,n.Y)(g.S,{tooltip:(0,n.Y)(ef,{result:u}),sx:{color:"secondary",fontSize:"16px"},"data-sentry-element":"TooltipButton","data-sentry-source-file":"Result.tsx"})]}),(0,n.FD)(d.A,{direction:"row",justifyContent:"space-between","data-sentry-element":"Stack","data-sentry-source-file":"Result.tsx",children:[u.instructions&&(0,n.Y)(f.A,{size:"small",fullWidth:!0,onClick:()=>{c(e=>!e)},children:l?"Hide instructions":"Show instructions"}),t&&(0,n.Y)(f.A,{size:"small",fullWidth:!0,onClick:t,children:(0,x.t)("directions.edit_destinations")})]}),l&&(0,n.Y)(ec,{instructions:u.instructions})]})},em=e=>{let{revealForm:t}=e,r=(0,u.ts)(),{userSettings:a}=(0,L.dk)(),{isImperial:o}=a,{result:i}=s();if(!i)return null;let l=ey(i.time),c=j(o,i.distance),p=j(o,i.totalAscent);return r?(0,n.Y)(eh,{revealForm:t,time:l,distance:c,ascent:p}):(0,n.FD)(ed,{elevation:3,$height:"100%",$overflow:"auto","data-sentry-element":"StyledPaper","data-sentry-component":"Result","data-sentry-source-file":"Result.tsx",children:[(0,n.FD)(d.A,{direction:"row",spacing:2,width:"100%",justifyContent:"space-between","data-sentry-element":"Stack","data-sentry-source-file":"Result.tsx",children:[(0,n.FD)("div",{children:[(0,n.Y)(y.A,{variant:"caption","data-sentry-element":"Typography","data-sentry-source-file":"Result.tsx",children:(0,x.t)("directions.result.time")}),(0,n.Y)(y.A,{fontWeight:900,variant:"h6","data-sentry-element":"Typography","data-sentry-source-file":"Result.tsx",children:l})]}),(0,n.FD)("div",{children:[(0,n.Y)(y.A,{variant:"caption","data-sentry-element":"Typography","data-sentry-source-file":"Result.tsx",children:(0,x.t)("directions.result.distance")}),(0,n.Y)(y.A,{fontWeight:900,variant:"h6","data-sentry-element":"Typography","data-sentry-source-file":"Result.tsx",children:c})]}),(0,n.FD)("div",{children:[(0,n.Y)(y.A,{variant:"caption","data-sentry-element":"Typography","data-sentry-source-file":"Result.tsx",children:(0,x.t)("directions.result.ascent")}),(0,n.Y)(y.A,{fontWeight:900,variant:"h6","data-sentry-element":"Typography","data-sentry-source-file":"Result.tsx",children:p})]})]}),(0,n.Y)(h.A,{sx:{mt:2,mb:3},"data-sentry-element":"Divider","data-sentry-source-file":"Result.tsx"}),i.instructions&&(0,n.Y)(ec,{instructions:i.instructions}),(0,n.Y)(ef,{result:i,"data-sentry-element":"PoweredBy","data-sentry-source-file":"Result.tsx"})]})};var eg=r(50294),ex=r(77439),ev=r(57134),eA=r(6918);let eY=(0,c.A)(eg.A,{target:"e1okk4uo0"})("padding:8px;border:0;svg{font-size:20px;}"),ew=[["car",ex.A],["bike",ev.A],["walk",eA.A]],eb=e=>{let{value:t,setMode:r,onChange:a}=e,o=(e,t)=>{null!==t&&(r(t),a(t))};return(0,n.Y)(d.A,{direction:"row",spacing:1,"data-sentry-element":"Stack","data-sentry-component":"ModeToggler","data-sentry-source-file":"ModeToggler.tsx",children:ew.map(e=>{let[r,a]=e;return(0,n.Y)(eY,{value:r,onChange:o,selected:t===r,children:(0,n.Y)(a,{})},r)})})};var ek=r(79737),eD=r(63501),eC=r(43107),eF=r(25690),eS=r(33955),eI=r(91349),eR=r(73665),eM=r(74912),eT=r(8696),e_=r(24525),eO=r(89424),eB=r(3094),eE=r(31198),eP=r.n(eE),ej=r(71454);let eL=e=>{let{width:t,height:r,text:a,hasShadow:o=!1,hasPin:i=!0}=e;return(0,n.Y)("svg",{display:"block",height:r,width:t,viewBox:"0 0 27 41","data-sentry-element":"svg","data-sentry-component":"TextMarker","data-sentry-source-file":"TextMarker.tsx",children:(0,n.FD)("g",{fillRule:"nonzero","data-sentry-element":"g","data-sentry-source-file":"TextMarker.tsx",children:[o&&(0,n.FD)("g",{transform:"translate(3.0, 29.0)",fill:"#000000",children:[(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"10.5",ry:"5.25002273"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"10.5",ry:"5.25002273"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"9.5",ry:"4.77275007"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"8.5",ry:"4.29549936"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"7.5",ry:"3.81822308"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"6.5",ry:"3.34094679"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"5.5",ry:"2.86367051"}),(0,n.Y)("ellipse",{opacity:"0.04",cx:"10.5",cy:"5.80029008",rx:"4.5",ry:"2.38636864"})]}),i?(0,n.FD)(n.FK,{children:[(0,n.Y)("path",{fill:"#239b56",d:"M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"}),(0,n.Y)("g",{opacity:"0.25",fill:"#000000",children:(0,n.Y)("path",{d:"M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"})})]}):(0,n.Y)("circle",{cx:"13.5",cy:"13.5",r:"13.5",fill:"#239b56"}),(0,n.Y)("g",{transform:"translate(8.0, 8.0)","data-sentry-element":"g","data-sentry-source-file":"TextMarker.tsx",children:(0,n.Y)("text",{x:"0",y:"11",fontSize:16,fontWeight:900,fill:"white",fontFamily:"Roboto","data-sentry-element":"text","data-sentry-source-file":"TextMarker.tsx",children:a})})]})})},ez=e=>{let{index:t,hasShadow:r,width:a,height:o,hasPin:i=!0}=e;return(0,n.Y)(eL,{text:t<41?String.fromCharCode(t+65):"",hasShadow:r,width:a,height:o,hasPin:i,"data-sentry-element":"TextMarker","data-sentry-component":"AlphabeticalMarker","data-sentry-source-file":"TextMarker.tsx"})};var eW=r(85816),eN=r(58478);class eH extends Error{constructor(){super("Points are too far from road network")}}var e$=r(81460);let eK={car:"car",bike:"bike",walk:"foot"},eZ=async(e,t)=>{let r=eK[e],n=t.map(e=>e.toReversed().join(",")).map(e=>"point=".concat(e,"&")).join(""),a="https://graphhopper.com/api/1/route?".concat(n,"vehicle=").concat(r,"&key=").concat("f189b841-6529-46c6-8a91-51f17477dcda","&type=json&points_encoded=false&snap_prevention=ferry"),o=await (0,eC.x6)(a),[i,l,s,c]=o.paths[0].bbox;return{time:o.paths[0].time/1e3,distance:o.paths[0].distance,totalAscent:o.paths[0].ascend,router:"GraphHopper",link:"https://graphhopper.com/",bbox:{w:i,s:c,e:s,n:l},geojson:o.paths[0].points,instructions:o.paths[0].instructions}},eq=e=>e<0||e<3?"#8f53c1":e<7.5?"orange":e<12?"OrangeRed":"crimson",eG=e=>{let t=e.features[0].geometry.coordinates,r=t.slice(0,-1).map((e,r)=>{let[n,a,o]=e,i=(0,e$.Yf)([n,a],t[r+1]);return[i,t[r+1][2]-o]}),n=r.reduce((e,t)=>e+t[0],0),a=r.map(e=>{let[t,r]=e;return[...Array(Math.round(t))].map(e=>100*r/Math.round(t))}).flat(),o=[];for(let e=0;e<a.length;e+=30){let t=a.slice(e,e+30).reduce((e,t)=>e+t,0);o.push(t/30)}return o.map((e,t)=>[30*t/n,eq(e)]).flat()},eU=(e,t)=>"walk"===e?{"line-color":"#8f53c1","line-width":5}:"car"===e?{"line-width":5,"line-color":"IndianRed"}:"bike"===e&&t.router.startsWith("BRouter")?{"line-color":"#57bff5","line-width":5,"line-gradient":["interpolate",["linear"],["line-progress"],...eG(t.geojson)]}:"bike"===e?{"line-color":"#57bff5","line-width":5}:void 0,eV={"line-join":"round","line-cap":"round"},eX="routing",eJ=(e,t,r)=>{eQ(),e.addSource(eX,{type:"geojson",data:t.geojson,lineMetrics:!0}),e.addLayer({id:"".concat(eX,"-line-casing"),type:"line",source:eX,layout:eV,paint:{"line-color":"white","line-width":8}}),e.addLayer({id:"".concat(eX,"-line"),type:"line",source:eX,layout:eV,paint:eU(r,t)})},eQ=()=>{let e=(0,eB.UK)();e.getLayer("".concat(eX,"-line"))&&e.removeLayer("".concat(eX,"-line")),e.getLayer("".concat(eX,"-line-casing"))&&e.removeLayer("".concat(eX,"-line-casing")),(null==e?void 0:e.getSource(eX))&&e.removeSource(eX)},e0="last-directions-mode",e1=()=>{var e;return null==(e=window.localStorage)?void 0:e.getItem(e0)},e5=async(e,t)=>{var r;if(!e||!t||t.length<2)return;null==(r=window.localStorage)||r.setItem(e0,e);let n=await eZ(e,t);if(null==n)return null;let a=await eB.y2;eJ(a,n,e);let{w:o,s:i,e:l,n:s}=n.bbox,c=new(eP()).LngLatBounds([o,i],[l,s]),d=(0,u.zI)()?{left:30,right:30,bottom:30,top:120}:{left:390,right:50,top:50,bottom:50},p=a.getBounds();return p.contains(c.getSouthWest())&&p.contains(c.getNorthEast())||a.fitBounds(c,{padding:d}),n};var e2=r(78150),e3=r(71510),e4=r(71734),e8=r(18334),e9=r(98109);let e6=e=>t=>{if(t instanceof eH)e((0,x.t)("directions.error.too_far"),"warning");else if(t instanceof e4.fk)e8.Cp(t),e("".concat((0,x.t)("error")," code ").concat(t.code),"error");else throw e8.Cp(t),e("".concat((0,x.t)("error")," – ").concat(t),"error"),t},e7=(e,t,r)=>{let{showToast:n}=(0,eN.d)(),a=(0,o.useRef)(!1),i=(0,Y.useRouter)().query.all;(0,o.useEffect)(()=>{let[o,...l]=Array.isArray(i)?i:[],s=_(l.flatMap(e=>e.split("/")));if(o&&s.length>=2)e(o),t(s),e5(o,s.map(C)).then(r).catch(e6(n));else{!1===a.current&&e1()&&(e(e1()),a.current=!0);let r=(0,e2.p)();if(r){let e=(0,D.C9)(r.center,(0,e3.p9)(r));(null==l?void 0:l.length)<=2?t([null,e]):t([...s.slice(0,s.length-1),e])}}return()=>{eQ()}},[i,e,t,r,n])},te=(e,t)=>{let{showToast:r}=(0,eN.d)();return(n,a)=>{if(!n||0===n.length)return;let o=M(a,n);o===w().asPath?(t(!0),e5(a,n.map(C)).then(e).catch(e6(r)).finally(()=>t(!1))):w().push(o)}},tt=()=>{let{points:e,setPoints:t}=s();return(r,n)=>{let a=(0,e9.xp)(e,r,()=>n);return t(a),a}},tr=(0,c.A)("div",{target:"ej5lkhr0"})("font-size:16px;right:6px;top:-4px;position:relative;"),tn=(0,c.A)(eI.A,{target:"ej5lkhr1"})("input::placeholder{font-size:0.9rem;}"),ta=e=>{var t;let{params:r,setInputValue:a,autocompleteRef:i,label:l,onFocus:s,onBlur:c,pointIndex:d,onOptionChange:p}=e,[y,f]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),{InputLabelProps:g,InputProps:x,...v}=r,A=(0,u.DE)(),{showToast:Y}=(0,eN.d)();function w(e){let t=e.coords.latitude,r=e.coords.longitude;p(null,(0,D.C9)([r,t],"My location")),f(!1)}(0,eR.A)(),(0,o.useEffect)(()=>{r.InputProps.ref(i.current)},[]);let b=e=>{f(!1),Y("Sorry, we couldn't find your location","error")};return(0,n.Y)(tn,{...v,variant:"outlined",size:"small",fullWidth:!0,InputProps:{startAdornment:(0,n.Y)(eM.A,{position:"start",sx:{position:"relative",top:5,left:5},children:(0,n.Y)(ez,{hasPin:!1,index:d,height:32})}),endAdornment:A&&h&&(null==(t=navigator)?void 0:t.geolocation)?y?(0,n.Y)(tr,{children:(0,n.Y)(u.dT,{})}):(0,n.Y)(eT.A,{title:"Get my location",children:(0,n.Y)(eW.A,{color:"secondary",sx:{cursor:"pointer"},onClick:()=>{f(!0),navigator.geolocation.getCurrentPosition(w,b,{timeout:1e4})}})}):void 0,style:{paddingRight:12}},placeholder:l,onChange:e=>{a(e.target.value)},onFocus:e=>{s(),e.target.select(),m(!0)},onBlur:e=>{c(e),m(!1)},"data-sentry-element":"StyledTextField","data-sentry-component":"DirectionsInput","data-sentry-source-file":"DirectionsAutocomplete.tsx"})},to=(e,t)=>{let{view:r}=(0,ek.OF)(),{stars:n}=(0,eD.yE)(),[a,i]=(0,o.useState)([]);return(0,o.useEffect)(()=>{(async()=>{try{if((0,eC.dZ)(eF.sw),""===e)return void i((0,eS.AS)(n,e));await (0,eF.qt)(400);let a=await (0,eF.pQ)(e,r);if(e!==t.current)return;i(a)}catch(e){if(e instanceof eF.Oy||e instanceof eF.UO)return;throw e}})()},[e,n]),a},ti=(0,c.A)("div",{target:"ej5lkhr2"})("width:100%;"),tl=(e,t,r)=>{let{mapClickOverrideRef:n}=(0,ek.OF)(),a=(0,o.useRef)(),i=tt(),l=(o,l)=>{i(e,(0,D.C9)(o,l)),t(l),r.current=l,n.current=a.current};return{onInputFocus:()=>{a.current=n.current,n.current=l},onInputBlur:e=>{var t;(null==(t=e.relatedTarget)?void 0:t.className)!=="maplibregl-canvas"&&(n.current=a.current)}}},ts=e=>{var t;let{label:r,value:a,pointIndex:i}=e,l=(0,o.useRef)(),{inputValue:c,valueRef:d,setInputValue:u}=(0,eF.A_)(),p=(0,o.useRef)(null),y=tt(),f=(0,o.useMemo)(()=>{let e;return"undefined"!=typeof document?(e=document.createElement("div")).innerHTML=ej.renderToStaticMarkup((0,n.Y)(ez,{index:i,hasShadow:!0,width:27})):e=void 0,{color:"salmon",draggable:!0,element:e,offset:[0,-10]}},[i]),h=(0,o.useRef)(),{points:m,mode:g,setResult:x,setLoading:v,setPoints:A}=s(),Y=te(x,v);(0,o.useEffect)(()=>((null==a?void 0:a.type)==="coords"&&eB.y2.then(e=>{h.current=new(eP()).Marker(f).setLngLat(a.coords.center).addTo(e)}),()=>{var e;null==(e=h.current)||e.remove()}),[f,a]);let w=e=>{Y(y(i,e),g)};null==(t=h.current)||t.on("dragend",()=>{var e;let t=null==(e=h.current)?void 0:e.getLngLat();t&&w((0,D.C9)([t.lng,t.lat]))});let b=to(c,d),k=(e,t)=>{console.log("selected",t),u((0,F.O)(t)),p.current=(0,F.O)(t),w(t)},{onInputFocus:C,onInputBlur:S}=tl(i,u,p),I=e=>{S(e),p.current!==c&&(b.length>0&&c?k(null,b[0]):m&&A((0,e9.qh)(m,i)))};return(0,o.useEffect)(()=>{(0,F.O)(a)!==p.current&&(u((0,F.O)(a)),p.current=(0,F.O)(a))},[u,a]),(0,n.Y)(ti,{ref:l,"data-sentry-element":"Row","data-sentry-component":"DirectionsAutocomplete","data-sentry-source-file":"DirectionsAutocomplete.tsx",children:(0,n.Y)(e_.A,{inputValue:c,options:b,value:null,filterOptions:e=>e,getOptionLabel:F.O,getOptionKey:e=>JSON.stringify(e),getOptionDisabled:e=>"loader"===e.type,onChange:k,autoComplete:!0,noOptionsText:"",disableClearable:!0,autoHighlight:!0,clearOnEscape:!0,renderInput:e=>(0,n.Y)(ta,{params:e,setInputValue:u,autocompleteRef:l,label:r,onFocus:C,onBlur:I,pointIndex:i,onOptionChange:k}),renderOption:(0,eO.G)(c),"data-sentry-element":"Autocomplete","data-sentry-source-file":"DirectionsAutocomplete.tsx"})})};var tc=r(17457),td=r(55088),tu=r(88496),tp=r(88320);let ty=(e,t)=>{let{setResult:r,setLoading:n,mode:a}=s(),i=te(r,n),l=tt(),{mapClickOverrideRef:c}=(0,ek.OF)();(0,o.useEffect)(()=>(c.current=(r,n)=>{if(e){let o=(0,D.C9)(r,n);e[0]?i(l(t.length-1,o),a):i(l(0,o),a)}},()=>{c.current=void 0}),[t,c,a,e,i,l])},tf=e=>{let{setResult:t,hideForm:r}=e,a={value:null,pointIndex:0,label:(0,x.t)("directions.form.start_or_click")},i=(0,o.useMemo)(()=>({value:null,pointIndex:1,label:(0,x.t)("directions.form.destination")}),[]),{loading:l,setLoading:c,mode:u,setMode:p,points:y,setPoints:h}=s(),[m,g]=(0,o.useState)([a,i]),{handleDragStart:v,handleDragOver:A,handleDragEnd:Y,HighlightedDropzone:w,draggedItem:b,draggedOverIndex:k}=(0,tu.eR)({initialItems:m,moveItems:()=>{},direction:"horizontal"});(0,o.useEffect)(()=>{var e;let t=null!=(e=null==y?void 0:y.map((e,t)=>({value:e,pointIndex:t,label:(0,x.t)(0===t?"directions.form.start_or_click":"directions.form.destination")})))?e:[];(null==y?void 0:y.length)===1&&g([...t,i]),(null==y?void 0:y.length)>=2&&g(t)},[i,y]),ty(y,m),e7(p,h,t);let D=te(t,c);return r?null:(0,n.FD)(ed,{elevation:3,"data-sentry-element":"StyledPaper","data-sentry-component":"DirectionsForm","data-sentry-source-file":"DirectionsForm.tsx",children:[(0,n.FD)(d.A,{direction:"row",spacing:1,mb:2,alignItems:"center",justifyContent:"space-between","data-sentry-element":"Stack","data-sentry-source-file":"DirectionsForm.tsx",children:[(0,n.Y)(eb,{value:u,setMode:p,onChange:e=>D(y,e),"data-sentry-element":"ModeToggler","data-sentry-source-file":"DirectionsForm.tsx"}),(0,n.Y)(B,{"data-sentry-element":"CloseButton","data-sentry-source-file":"DirectionsForm.tsx"})]}),(0,n.FD)(d.A,{spacing:1,mb:3,"data-sentry-element":"Stack","data-sentry-source-file":"DirectionsForm.tsx",children:[m.map((e,t)=>{let{value:r,label:a,pointIndex:o}=e;return(0,n.FD)(er.A,{sx:{position:"relative"},children:[(0,n.FD)(d.A,{direction:"row",alignItems:"center",children:[(0,n.Y)(tp.L,{onDragStart:r=>{v(r,{id:t,content:e})},onDragOver:e=>{A(e,t)},onDragEnd:e=>{Y(e);let t=(0,e9.LY)(m,b.id,k),r=t.map(e=>e.value);g(t),h(r),D(r,u)}}),(0,n.Y)(ts,{value:r,label:a,pointIndex:t})]}),(0,n.Y)(w,{index:t})]},"input-".concat(o))}),(0,n.Y)("div",{children:(0,n.Y)(f.A,{variant:"text",startIcon:(0,n.Y)(td.A,{}),onClick:()=>{g([...m,{...i}])},size:"small","data-sentry-element":"Button","data-sentry-source-file":"DirectionsForm.tsx",children:(0,x.t)("directions.add_destination")})})]}),(0,n.Y)(f.A,{loading:l,loadingPosition:"start",variant:"contained",fullWidth:!0,startIcon:(0,n.Y)(tc.A,{}),onClick:()=>D(y,u),"data-sentry-element":"Button","data-sentry-source-file":"DirectionsForm.tsx",children:(0,x.t)("directions.get_directions")})]})},th=(0,c.A)(d.A,{shouldForwardProp:e=>!e.startsWith("$"),target:"e1j3vhv10"})("position:absolute;top:8px;left:8px;right:8px;z-index:1101;max-height:calc(100vh - 16px);box-shadow:0 10px 20px 0 rgba(0,0,0,0.12);@media ",u.BL,"{max-width:394px;}"),tm=()=>{let e=(0,u.ts)(),{setResult:t,result:r}=s(),[a,i,l]=(0,u.lC)(!0),c=e&&r&&!a,d=(0,o.useCallback)(e=>{t(e),l()},[l,t]);return(0,n.FD)(th,{spacing:1,$isMobileMode:e,"data-sentry-element":"Wrapper","data-sentry-component":"DirectionsBox","data-sentry-source-file":"DirectionsBox.tsx",children:[(0,n.Y)(tf,{setResult:d,hideForm:c,"data-sentry-element":"DirectionsForm","data-sentry-source-file":"DirectionsBox.tsx"}),r&&(0,n.Y)(em,{revealForm:!a&&i})]})},tg=(0,c.A)("h1",{target:"etrhw170"})("position:absolute;left:-9999px;"),tx=()=>(0,n.Y)(tg,{"data-sentry-element":"StyledH1","data-sentry-component":"SeoTitle","data-sentry-source-file":"Directions.tsx",children:(0,x.t)("featurepanel.directions_button")}),tv=()=>{let{featureShown:e}=(0,a.VS)();return e?null:(0,n.FD)(l,{"data-sentry-element":"DirectionsProvider","data-sentry-component":"Directions","data-sentry-source-file":"Directions.tsx",children:[(0,n.Y)(tx,{"data-sentry-element":"SeoTitle","data-sentry-source-file":"Directions.tsx"}),(0,n.Y)(tm,{"data-sentry-element":"DirectionsBox","data-sentry-source-file":"Directions.tsx"})]})}},95066:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/directions/[[...all]]",function(){return r(48795)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[6593,2453,636,8792],()=>t(95066)),_N_E=e.O()}]);