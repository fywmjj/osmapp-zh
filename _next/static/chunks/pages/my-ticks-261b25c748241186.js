!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a0133823-5e78-4cbe-b758-b628efa0b36d",e._sentryDebugIdIdentifier="sentry-dbid-a0133823-5e78-4cbe-b758-b628efa0b36d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2447],{39634:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-ticks",function(){return a(55627)}])},55627:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ev});var r=a(18153),n=a(14232),s=a(89099),i=a.n(s),l=a(82777),o=a(93032),c=a(58311),d=a(34051),y=a(13473),u=a(40359),m=a(95063),f=a(42799),h=a(7831),p=a(6343),k=a(86422),b=a(25282),g=a(94213),T=a(71734),v=a(43107),x=a(98155),A=a(47745);let M=async e=>{(0,A.Ax)("allTicks",e);let t=e.map(e=>{let{shortId:t}=e;if(!t)return"";let{id:a}=(0,T.k1)(t);return"node(".concat(a,");")}).join(""),a=await (0,v.x6)((0,x.hY)("[out:json];(".concat(t,");out body qt;")));return(0,x.u$)(a)};var Y=a(3094);let w="myticks-heatmap",_="myticks",S={id:w,type:"heatmap",source:_,paint:{"heatmap-weight":1,"heatmap-radius":9,"heatmap-intensity":1,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(52,95,175)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"]}},P=e=>({type:"FeatureCollection",features:e.filter(e=>e.center).map(e=>({type:"Feature",geometry:{type:"Point",coordinates:e.center},properties:{mag:1}}))}),D=e=>{(0,n.useEffect)(()=>{let t=(0,Y.UK)();if(!t)return;let a=P(e),r=()=>{t.getSource(_)?t.getSource(_).setData(a):t.addSource(_,{type:"geojson",data:a}),t.getLayer(w)||t.addLayer(S)};return t.on("styledata",r),t.isStyleLoaded()?r():t.once("load",r),()=>{t.off("styledata",r),t.getLayer(w)&&t.removeLayer(w),t.getSource(_)&&t.removeSource(_)}},[e])};var R=a(40872),C=a(69233),j=a(4526),L=a(13323),F=a(69241),I=a(3742),E=a(49416),G=a(37876);let N=(0,E.A)((0,G.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var B=a(66438),O=a(95651),q=a(63915),z=a(64170),H=a(14457),K=a(21849);function Q(e){return(0,K.Ay)("MuiTableSortLabel",e)}let X=(0,H.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]);var U=a(75687);let V=e=>{let{classes:t,direction:a,active:r}=e,n={root:["root",r&&"active","direction".concat((0,z.A)(a))],icon:["icon","iconDirection".concat((0,z.A)(a))]};return(0,L.A)(n,Q,t)},W=(0,B.Ay)(I.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.active&&t.active]}})((0,O.A)(e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,["& .".concat(X.icon)]:{opacity:.5}},["&.".concat(X.active)]:{color:(t.vars||t).palette.text.primary,["& .".concat(X.icon)]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}})),Z=(0,B.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.icon,t["iconDirection".concat((0,z.A)(a.direction))]]}})((0,O.A)(e=>{let{theme:t}=e;return{fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}})),$=n.forwardRef(function(e,t){let a=(0,q.b)({props:e,name:"MuiTableSortLabel"}),{active:r=!1,children:n,className:s,direction:i="asc",hideSortIcon:l=!1,IconComponent:o=N,slots:c={},slotProps:d={},...y}=a,u={...a,active:r,direction:i,hideSortIcon:l,IconComponent:o},m=V(u),f={slots:c,slotProps:d},[h,p]=(0,U.A)("root",{elementType:W,externalForwardedProps:f,ownerState:u,className:(0,F.A)(m.root,s),ref:t}),[k,b]=(0,U.A)("icon",{elementType:Z,externalForwardedProps:f,ownerState:u,className:m.icon});return(0,G.jsxs)(h,{disableRipple:!0,component:"span",...p,...y,children:[n,l&&!r?null:(0,G.jsx)(k,{as:o,...b})]})});function J(e,t,a){var r,n;return null!=(n=null==(r=e[a])?void 0:r.localeCompare(t[a]))?n:0}let ee=[{id:"name",numeric:!1,label:(0,f.t)("my_ticks.route_name")},{id:"grade",numeric:!1,label:(0,f.t)("my_ticks.route_grade")},{id:"style",numeric:!0,label:(0,f.t)("my_ticks.route_style")},{id:"date",numeric:!0,label:(0,f.t)("my_ticks.route_date")}];function et(e){let{order:t,orderBy:a,onRequestSort:n}=e,s=e=>t=>{n(t,e)};return(0,r.Y)(R.A,{"data-sentry-element":"TableHead","data-sentry-component":"EnhancedTableHead","data-sentry-source-file":"useSortedTable.tsx",children:(0,r.FD)(C.A,{"data-sentry-element":"TableRow","data-sentry-source-file":"useSortedTable.tsx",children:[ee.map(e=>(0,r.Y)(j.A,{align:e.numeric?"right":"left",sortDirection:a===e.id&&t,children:(0,r.Y)($,{active:a===e.id,direction:a===e.id?t:"asc",onClick:s(e.id),children:e.label})},e.id)),(0,r.Y)(j.A,{"data-sentry-element":"TableCell","data-sentry-source-file":"useSortedTable.tsx"})]})})}let ea=e=>{let[t,a]=(0,n.useState)("asc"),[s,i]=(0,n.useState)("date");return{visibleRows:n.useMemo(()=>null==e?void 0:e.sort(function(e,t){return"desc"===e?(e,a)=>J(e,a,t):(e,a)=>-J(e,a,t)}(t,s)),[t,s,e]),tableHeader:(0,r.Y)(et,{order:t,orderBy:s,onRequestSort:(e,r)=>{a(s===r&&"asc"===t?"desc":"asc"),i(r)}})}};var er=a(48230),en=a.n(er),es=a(57620),ei=a(2329),el=a(93451),eo=a(79737),ec=a(54747),ed=a(3208),ey=a(37162);let eu=e=>{let{fetchedTick:t}=e,a=(0,ec.Qq)(t.tags),{view:n}=(0,eo.OF)(),{name:s,style:i,date:l,apiId:o}=t;return(0,r.FD)(C.A,{"data-sentry-element":"TableRow","data-sentry-component":"MyTicksRow","data-sentry-source-file":"MyTicksRow.tsx",children:[(0,r.Y)(j.A,{"data-sentry-element":"TableCell","data-sentry-source-file":"MyTicksRow.tsx",children:(0,r.Y)(en(),{href:"/".concat((0,T.kb)(o),"#").concat(n.join("/")),"data-sentry-element":"Link","data-sentry-source-file":"MyTicksRow.tsx",children:s})}),(0,r.Y)(j.A,{"data-sentry-element":"TableCell","data-sentry-source-file":"MyTicksRow.tsx",children:(0,r.Y)(ei.I,{routeDifficulties:a,"data-sentry-element":"ConvertedRouteDifficultyBadge","data-sentry-source-file":"MyTicksRow.tsx"})}),(0,r.Y)(j.A,{"data-sentry-element":"TableCell","data-sentry-source-file":"MyTicksRow.tsx",children:(0,r.Y)(ed.w,{style:i,"data-sentry-element":"TickStyleBadge","data-sentry-source-file":"MyTicksRow.tsx"})}),(0,r.Y)(j.A,{sx:{textAlign:"right"},"data-sentry-element":"TableCell","data-sentry-source-file":"MyTicksRow.tsx",children:(0,es.GP)(l,el.HQ)}),(0,r.Y)(j.A,{"data-sentry-element":"TableCell","data-sentry-source-file":"MyTicksRow.tsx",children:(0,r.Y)(ey.Z,{tick:t.tick,"data-sentry-element":"TickMoreButton","data-sentry-source-file":"MyTicksRow.tsx"})})]})};var em=a(35593),ef=a(17879),eh=a(69984),ep=a(12392);let ek=e=>{let{features:t}=e,[a,s]=(0,n.useState)(!0);return 0===t.length?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(p.jM,{"data-sentry-element":"PanelSidePadding","data-sentry-source-file":"MyTicksGraphs.tsx",children:(0,r.Y)(l.A,{variant:"h6",mt:2,"data-sentry-element":"Typography","data-sentry-source-file":"MyTicksGraphs.tsx",children:"Routes distribution"})}),(0,r.Y)(ef.G,{features:t,cutEmptyMargins:!a,isGrouped:a,"data-sentry-element":"RouteDistribution","data-sentry-source-file":"MyTicksGraphs.tsx"}),(0,r.Y)(p.jM,{"data-sentry-element":"PanelSidePadding","data-sentry-source-file":"MyTicksGraphs.tsx",children:(0,r.Y)(eh.A,{control:(0,r.Y)(ep.A,{checked:a,size:"small",onChange:e=>s(e.target.checked)}),label:"Grouping","data-sentry-element":"FormControlLabel","data-sentry-source-file":"MyTicksGraphs.tsx"})})]})};function eb(){return(0,r.FD)(p.jM,{"data-sentry-element":"PanelSidePadding","data-sentry-component":"NoTicksContent","data-sentry-source-file":"MyTicksPanel.tsx",children:[(0,r.Y)(l.A,{variant:"body1",gutterBottom:!0,"data-sentry-element":"Typography","data-sentry-source-file":"MyTicksPanel.tsx",children:(0,f.t)("my_ticks.no_ticks_paragraph1")}),(0,r.Y)(l.A,{variant:"caption",display:"block",gutterBottom:!0,color:"secondary","data-sentry-element":"Typography","data-sentry-source-file":"MyTicksPanel.tsx",children:(0,f.t)("my_ticks.no_ticks_paragraph2")})]})}let eg=(e,t,a)=>{let r=Object.keys(t).reduce((e,a)=>{let r=t[a];return{...e,[(0,T.in)(r.osmMeta)]:r}},{}),n=e.filter(e=>e.shortId).map((e,t)=>{var n;let s=r[e.shortId],i=(0,ec.Qq)(null==s?void 0:s.tags),{routeDifficulty:l}=(0,ec.ej)(i,a);return{key:"".concat(e.shortId,"-").concat(e.timestamp),name:null==s||null==(n=s.tags)?void 0:n.name,grade:l.grade,center:null==s?void 0:s.center,index:t,date:e.timestamp,style:e.style,apiId:(0,T.k1)(e.shortId),tags:null==s?void 0:s.tags,tick:e}});return(0,A.Ax)("tickRows",n),n},eT=e=>{let{fetchedTicks:t,features:a}=e,{visibleRows:n,tableHeader:s}=ea(t);return(0,r.FD)(r.FK,{children:[(null==t?void 0:t.length)===0?(0,r.Y)(eb,{}):(0,r.Y)(o.A,{component:c.A,children:(0,r.FD)(d.A,{size:"small",children:[s,(0,r.Y)(y.A,{children:n.map(e=>(0,r.Y)(eu,{fetchedTick:e},e.tick.id))})]})}),(0,r.Y)(ek,{features:a,"data-sentry-element":"MyTicksGraphs","data-sentry-source-file":"MyTicksPanel.tsx"})]})},ev=()=>{let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1),{userSettings:c}=(0,b.dk)(),{ticks:d}=(0,em.D1)();return((0,n.useEffect)(()=>{o(!0),0!==d.length&&M(d).then(e=>{s(e),t(eg(d,e,c["climbing.gradeSystem"])),o(!1)})},[d,c]),D(e),(null==e?void 0:e.length)===0)?null:(0,r.Y)(k.YX,{"data-sentry-element":"ClientOnly","data-sentry-component":"MyTicksPanel","data-sentry-source-file":"MyTicksPanel.tsx",children:(0,r.Y)(g.BW,{className:"my-ticks-drawer","data-sentry-element":"MobilePageDrawer","data-sentry-source-file":"MyTicksPanel.tsx",children:(0,r.Y)(p.wq,{"data-sentry-element":"PanelContent","data-sentry-source-file":"MyTicksPanel.tsx",children:(0,r.FD)(p.AO,{"data-sentry-element":"PanelScrollbars","data-sentry-source-file":"MyTicksPanel.tsx",children:[(0,r.Y)(h.F,{right:!0,onClick:()=>{i().push("/")},"data-sentry-element":"ClosePanelButton","data-sentry-source-file":"MyTicksPanel.tsx"}),(0,r.Y)(p.jM,{"data-sentry-element":"PanelSidePadding","data-sentry-source-file":"MyTicksPanel.tsx",children:(0,r.Y)("h1",{children:(0,f.t)("my_ticks.title")})}),l?(0,r.Y)(u.A,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,r.Y)(m.A,{})}):(0,r.Y)(eT,{fetchedTicks:e,features:a})]})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(39634)),_N_E=e.O()}]);