!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6d48647e-6a01-4f26-b1b6-769bb59a795f",e._sentryDebugIdIdentifier="sentry-dbid-6d48647e-6a01-4f26-b1b6-769bb59a795f")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2700],{82700:(e,t,r)=>{r.r(t),r.d(t,{default:()=>eX,useLayerSwitcherShortcuts:()=>eH});var a=r(18153),n=r(14232),s=r(53318),l=r(50383),o=r(86422),i=r(46868),c=r(49416),d=r(37876);let y=(0,c.A)((0,d.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");var u=r(98975),p=r(69585),m=r(42008),h=r(82777),f=r(45495),x=r(51804),g=r(75807),v=r(79737),b=r(42799);let A=e=>{let{url:t}=e,{activeLayers:r,setActiveLayers:n,setUserLayers:s}=(0,v.OF)();return(0,a.Y)(p.A,{edge:"end","aria-label":"close",onClick:e=>(e.stopPropagation(),s(e=>(r.includes(t)&&n(["basic"]),[...e.filter(e=>e.url!==t)])),!1),"data-sentry-element":"IconButton","data-sentry-component":"RemoveUserLayerAction","data-sentry-source-file":"helpers.tsx",children:(0,a.Y)(g.A,{fontSize:"small","data-sentry-element":"CloseIcon","data-sentry-source-file":"helpers.tsx"})})},L=()=>(0,a.FD)(a.FK,{children:[(0,a.Y)(m.A,{m:2,"data-sentry-element":"Box","data-sentry-source-file":"helpers.tsx",children:(0,a.Y)(h.A,{variant:"h5",color:"textPrimary","data-sentry-element":"Typography","data-sentry-source-file":"helpers.tsx",children:(0,b.t)("layerswitcher.heading")})}),(0,a.Y)(m.A,{m:2,"data-sentry-element":"Box","data-sentry-source-file":"helpers.tsx",children:(0,a.Y)(h.A,{variant:"body2",color:"textSecondary","data-sentry-element":"Typography","data-sentry-source-file":"helpers.tsx",children:(0,a.Y)(b.wD,{id:"layerswitcher.intro","data-sentry-element":"Translation","data-sentry-source-file":"helpers.tsx"})})})]}),Y=e=>{let{Icon:t}=e;return(0,a.Y)(f.A,{"data-sentry-element":"ListItemIcon","data-sentry-component":"LayerIcon","data-sentry-source-file":"helpers.tsx",children:t&&(0,a.Y)(t,{fontSize:"small"})})},C=(0,u.A)(x.A,{target:"ehb0uug0"})(".MuiListItemIcon-root{min-width:45px;svg{color:",e=>{let{theme:t}=e;return t.palette.action.disabled},";}}.Mui-selected{.MuiListItemIcon-root svg{color:",e=>{let{theme:t}=e;return t.palette.action.active},";}}"),w=(0,u.A)("div",{target:"ehb0uug1"})("padding-bottom:1.5em;"),S=(e,t)=>{let[,r,a]=e;return!t||parseFloat(r)>t[1]&&parseFloat(r)<t[3]&&parseFloat(a)>t[0]&&parseFloat(a)<t[2]},I=(e,t)=>{if(t)try{new URL(e)}catch(e){return!1}let r=e.replace("{zoom}","{z}");return r.includes("{x}")&&r.includes("{y}")&&r.includes("{z}")||r.includes("{bbox-epsg-3857}")};var F=r(25541),D=r(69241),k=r(13323),O=r(92181),_=r(66438),B=r(95651),z=r(63915),E=r(14770),T=r(3742),M=r(74648),R=r(43132),j=r(20370),G=r(72471);let P=e=>{let{alignItems:t,classes:r,dense:a,disabled:n,disableGutters:s,divider:l,selected:o}=e,i=(0,k.A)({root:["root",a&&"dense",!s&&"gutters",l&&"divider",n&&"disabled","flex-start"===t&&"alignItemsFlexStart",o&&"selected"]},G.Y,r);return{...r,...i}},K=(0,_.Ay)(T.A,{shouldForwardProp:e=>(0,E.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((0,B.A)(e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(G.A.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,O.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(G.A.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,O.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(G.A.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,O.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,O.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(G.A.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(G.A.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{paddingTop:4,paddingBottom:4}}]}})),N=n.forwardRef(function(e,t){let r=(0,z.b)({props:e,name:"MuiListItemButton"}),{alignItems:a="center",autoFocus:s=!1,component:l="div",children:o,dense:i=!1,disableGutters:c=!1,divider:y=!1,focusVisibleClassName:u,selected:p=!1,className:m,...h}=r,f=n.useContext(j.A),x=n.useMemo(()=>({dense:i||f.dense||!1,alignItems:a,disableGutters:c}),[a,f.dense,i,c]),g=n.useRef(null);(0,M.A)(()=>{s&&g.current&&g.current.focus()},[s]);let v={...r,alignItems:a,dense:x.dense,disableGutters:c,divider:y,selected:p},b=P(v),A=(0,R.A)(g,t);return(0,d.jsx)(j.A.Provider,{value:x,children:(0,d.jsx)(K,{ref:A,href:h.href||h.to,component:(h.href||h.to)&&"div"===l?"button":l,focusVisibleClassName:(0,D.A)(b.focusVisible,u),ownerState:v,className:(0,D.A)(b.root,m),...h,classes:b,children:o})})});var U=r(3291),V=r(16656),W=r(56486),H=r(27218),X=r(1992),Z=r(43107),$=r(29699),Q=r(30047),q=r(65364);let J=e=>e?new Date(e).toLocaleString(b.YG.lang):null,ee=()=>(0,Z.x6)("".concat(Q.bO,"api/climbing-tiles/stats")),et=()=>{let{data:e,error:t,isFetching:r}=(0,X.useQuery)([],()=>ee());if(r)return null;if(t)return console.error("Error fetching climbing stats",t),null;let{lastRefresh:n,osmDataTimestamp:s,devStats:l}=e,o=(0,a.FD)(a.FK,{children:[(0,a.Y)(b.wD,{id:"climbing_tiles.stats",values:{lastRefresh:J(n),osmTime:J(s)}}),(0,a.Y)("br",{}),(0,a.Y)("br",{}),"Dev stats:"," ",(0,$.H)(Object.entries(l).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r)}).join("\n")),(0,a.Y)("br",{})]});return(0,a.FD)(a.FK,{children:[J(s).replace(/:\d+( [APM]+)?$/,"$1"),(0,a.Y)(H.S,{sx:{fontSize:"14px",margin:"-8px -3px -6px -3px"},tooltip:o,"data-sentry-element":"TooltipButton","data-sentry-source-file":"Overlays.tsx"})]})},er=()=>q.env.NEXT_PUBLIC_ENABLE_CLIMBING_TILES?(0,a.Y)(et,{}):(0,a.Y)(a.FK,{children:"lite"}),ea=e=>{let{layer:t}=e,{activeLayers:r,setActiveLayers:n}=(0,v.OF)(),{key:s,name:l,Icon:i}=t,c=e=>{n(e=>e.includes(s)?e.filter(e=>e!==s):e.concat(s)),e.stopPropagation()},d=r.includes(s),y="climbing"===s&&d?(0,a.Y)(er,{}):void 0;return(0,a.FD)(N,{onClick:c,"data-sentry-element":"ListItemButton","data-sentry-component":"OverlayItem","data-sentry-source-file":"Overlays.tsx",children:[(0,a.Y)(Y,{Icon:i,"data-sentry-element":"LayerIcon","data-sentry-source-file":"Overlays.tsx"}),(0,a.Y)(U.A,{primary:(0,o.t6)(l),secondary:y,"data-sentry-element":"ListItemText","data-sentry-source-file":"Overlays.tsx"}),(0,a.Y)(V.A,{"data-sentry-element":"ListItemSecondaryAction","data-sentry-source-file":"Overlays.tsx",children:(0,a.Y)(W.A,{edge:"end",checked:d,onClick:c,"data-sentry-element":"Checkbox","data-sentry-source-file":"Overlays.tsx"})})]},s)},en=e=>{let{overlayLayers:t}=e;return(0,a.FD)(a.FK,{children:[(0,a.Y)(h.A,{variant:"overline",display:"block",color:"textSecondary",style:{padding:"1em 0 0 1em"},"data-sentry-element":"Typography","data-sentry-source-file":"Overlays.tsx",children:(0,b.t)("layerswitcher.overlays")}),(0,a.Y)(C,{dense:!0,suppressHydrationWarning:!0,"data-sentry-element":"StyledList","data-sentry-source-file":"Overlays.tsx",children:t.map(e=>"spacer"===e.type?(0,a.Y)(w,{},e.key):(0,a.Y)(ea,{layer:e},e.key))})]})};var es=r(14259),el=r(95063),eo=r(24525),ei=r(91349),ec=r(11514),ed=r(65566),ey=r(14476),eu=r(50090);let ep=e=>[Math.min(...e.map(e=>{let[t]=e;return t})),Math.min(...e.map(e=>{let[,t]=e;return t})),Math.max(...e.map(e=>{let[t]=e;return t})),Math.max(...e.map(e=>{let[,t]=e;return t}))];async function em(){return(await (0,Z.x6)("https://osmlab.github.io/editor-layer-index/imagery.geojson")).features.map(e=>{let{properties:t,geometry:r}=e,a=r&&r.coordinates?r.coordinates:void 0,n=null==a?void 0:a.map(ep);return{...t,bbox:n,url:t.url.replace("{proj}","EPSG:3857").replace("{width}","256").replace("{height}","256").replace("{bbox}","{bbox-epsg-3857}")}}).filter(e=>{let{type:t,available_projections:r}=e;return"tms"===t||"wms"===t&&(null!=r?r:[]).includes("EPSG:3857")}).filter(e=>{let{url:t}=e;return I(t,!1)})}var eh=r(14457),ef=r(21849);function ex(e){return(0,ef.Ay)("MuiFormGroup",e)}(0,eh.A)("MuiFormGroup",["root","row","error"]);var eg=r(95712),ev=r(70442);let eb=e=>{let{classes:t,row:r,error:a}=e;return(0,k.A)({root:["root",r&&"row",a&&"error"]},ex,t)},eA=(0,_.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),eL=n.forwardRef(function(e,t){let r=(0,z.b)({props:e,name:"MuiFormGroup"}),{className:a,row:n=!1,...s}=r,l=(0,eg.A)(),o=(0,ev.A)({props:r,muiFormControl:l,states:["error"]}),i={...r,row:n,error:o.error},c=eb(i);return(0,d.jsx)(eA,{className:(0,D.A)(c.root,a),ownerState:i,ref:t,...s})});var eY=r(69984),eC=r(55109);let ew=e=>{let{name:t,country_code:r}=e;return r?"".concat(r," - ").concat(t):"Global - ".concat(t)},eS=e=>{let{index:t,onSelect:r}=e,[s,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!0),{view:c}=(0,v.OF)(),d=[{type:"custom"},...t.filter(e=>{let{overlay:t}=e;return!t}).filter(e=>!s||"explicit"===e.permission_osm||"implicit"===e.permission_osm).filter(e=>{let{bbox:t}=e;return!o||!t||t.some(e=>S(c,e))}).sort((e,t)=>ew(e).localeCompare(ew(t))).map(e=>({type:"layerIndex",layer:e}))];return(0,a.FD)("div",{"data-sentry-component":"SuccessLayerInput","data-sentry-source-file":"SuccessLayerInput.tsx",children:[(0,a.Y)(eo.A,{options:d,renderInput:e=>(0,a.Y)(ei.A,{...e,margin:"dense",label:"Layer"}),getOptionLabel:e=>"custom"===e.type?"Custom URL":ew(e.layer),onChange:(e,t)=>{r(t)},renderOption:(e,t)=>(0,a.Y)(m.A,{component:"li",...e,children:(0,a.Y)("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:"layerIndex"===t.type?(0,a.FD)(a.FK,{children:[t.layer.best&&(0,a.Y)(eC.A,{}),ew(t.layer)]}):"Custom URL"})}),"data-sentry-element":"Autocomplete","data-sentry-source-file":"SuccessLayerInput.tsx"}),(0,a.FD)(eL,{row:!0,"data-sentry-element":"FormGroup","data-sentry-source-file":"SuccessLayerInput.tsx",children:[(0,a.Y)(eY.A,{control:(0,a.Y)(W.A,{checked:s,onChange:e=>{let{target:{checked:t}}=e;return l(t)}}),label:(0,b.t)("layerswitcher.compatible_license"),"data-sentry-element":"FormControlLabel","data-sentry-source-file":"SuccessLayerInput.tsx"}),(0,a.Y)(eY.A,{control:(0,a.Y)(W.A,{checked:o,onChange:e=>{let{target:{checked:t}}=e;return i(t)}}),label:(0,b.t)("layerswitcher.layers_in_area"),"data-sentry-element":"FormControlLabel","data-sentry-source-file":"SuccessLayerInput.tsx"})]})]})},eI=()=>(0,a.FD)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},"data-sentry-component":"LoadingLayerInput","data-sentry-source-file":"AddCustomLayer.tsx",children:[(0,a.Y)(el.A,{"data-sentry-element":"CircularProgress","data-sentry-source-file":"AddCustomLayer.tsx"}),(0,a.Y)("p",{style:{fontSize:"1rem",color:"gray"},children:"Fetching the layer index..."})]}),eF=()=>(0,a.Y)("div",{"data-sentry-component":"ErrorLayerInput","data-sentry-source-file":"AddCustomLayer.tsx",children:(0,a.Y)("p",{children:"An error occured while fetching the layer index"})}),eD=e=>{let{onSelect:t}=e,[r,s]=(0,n.useState)([]),[l,o]=(0,n.useState)("loading");switch((0,n.useEffect)(()=>{em().then(e=>{s(e),o("success")}).catch(e=>{console.error(e),s([]),o("error")})},[]),l){case"success":return(0,a.Y)(eS,{index:r,onSelect:t});case"error":return(0,a.Y)(eF,{});default:return(0,a.Y)(eI,{})}},ek=/{((?!y|x|zoom)[a-zA-Z:,0-9]+)}/g,eO=e=>{let{category:t}=e,r=(0,b.t)("layerswitcher.category"),n={photo:(0,b.t)("layerswitcher.category_photo"),osmbasedmap:(0,b.t)("layerswitcher.category_osmbasedmap")}[t]||t;return(0,a.FD)("p",{"data-sentry-component":"Category","data-sentry-source-file":"AddCustomLayer.tsx",children:[r,": ",n]})},e_=e=>{var t;let{layer:r,onChange:s,onValidation:l}=e,{url:o}=r,i=(null==(t=o.match(ek))?void 0:t.map(e=>{let[t,r]=e.split(":"),a=r?r.split(",").map(e=>e.match(/[a-zA-Z0-9]+/)[0]):null;return{title:t.match(/[a-z]+/)[0],options:a}}))||[],[c,d]=(0,n.useState)({});return(0,n.useEffect)(()=>{s(c);let e=Object.keys(c).length;l(i.length===e)},[c,i.length,s,l]),(0,a.FD)("div",{style:{display:"grid"},"data-sentry-component":"Details","data-sentry-source-file":"AddCustomLayer.tsx",children:[(0,a.FD)("span",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[r.icon&&(0,a.Y)("img",{alt:"".concat(r.name,"s logo"),src:r.icon,height:20}),(0,a.Y)("h3",{children:r.name})]}),r.description&&(0,a.Y)("p",{children:r.description}),(0,a.Y)(eO,{category:r.category,"data-sentry-element":"Category","data-sentry-source-file":"AddCustomLayer.tsx"}),(0,a.FD)("span",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[r.license_url&&(0,a.Y)("a",{href:r.license_url,children:(0,b.t)("layerswitcher.license")}),r.privacy_policy_url&&(0,a.Y)("a",{href:r.privacy_policy_url,children:(0,b.t)("layerswitcher.privacy_policy")}),(0,a.Y)("p",{children:(0,b.t)("layerswitcher.not_all_work")})]}),(0,a.Y)("hr",{style:{width:"100%"}}),i.map(e=>{let t=!!e.options,r={switch:"Tile server",apikey:"API-Key"}[e.title]||e.title;return t?(0,a.Y)(eo.A,{options:e.options,renderInput:e=>(0,a.Y)(ei.A,{...e,label:r}),onChange:(t,r)=>{d(t=>({...t,[e.title]:r}))}},e.title):(0,a.Y)(ei.A,{label:r,onChange:t=>{d(r=>({...r,[e.title]:t.target.value}))}},e.title)})]})},eB=e=>{let{onValidation:t,onChange:r}=e,[s,l]=(0,n.useState)("https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg"),[o,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(o)},[o,t]),(0,n.useEffect)(()=>{i(I(s,!0))},[s]),(0,n.useEffect)(()=>{let e=s.replace("{zoom}","{z}");try{r({url:e,id:"custom-".concat(e),name:new URL(e).hostname,type:"tms"})}catch(t){r({url:e,id:"custom-".concat(e),name:e,type:"tms"})}},[s,o,r]),(0,a.Y)("div",{style:{paddingTop:"2rem"},"data-sentry-component":"CustomChoose","data-sentry-source-file":"AddCustomLayer.tsx",children:(0,a.Y)(ei.A,{label:"URL",fullWidth:!0,value:s,onChange:e=>{l(e.target.value)},error:!o&&!!s,helperText:(0,a.Y)("p",{children:(0,b.t)("layerswitcher.explaination")}),"data-sentry-element":"TextField","data-sentry-source-file":"AddCustomLayer.tsx"})})},ez=e=>{let{save:t,isOpen:r,onClose:s}=e,[l,o]=(0,n.useState)(!0),[i,c]=(0,n.useState)(null),[d,y]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),f=()=>{s(),c(null),o(!0),p(!1)};return(0,a.FD)(ec.A,{open:r,maxWidth:"md","data-sentry-element":"Dialog","data-sentry-component":"AddCustomDialog","data-sentry-source-file":"AddCustomLayer.tsx",children:[(0,a.Y)(ed.A,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"AddCustomLayer.tsx",children:(0,a.Y)("p",{children:"Add a layer"})}),(0,a.FD)(ey.A,{"data-sentry-element":"DialogContent","data-sentry-source-file":"AddCustomLayer.tsx",children:[(0,a.Y)(m.A,{mb:2,"data-sentry-element":"Box","data-sentry-source-file":"AddCustomLayer.tsx",children:(0,a.FD)(h.A,{variant:"body1","data-sentry-element":"Typography","data-sentry-source-file":"AddCustomLayer.tsx",children:["Layers are sourced from the"," ",(0,a.Y)("a",{href:"https://github.com/osmlab/editor-layer-index",target:"_blank",children:"editor-layer-index"})," ","list."]})}),(0,a.Y)(eD,{onSelect:e=>{if(!e){c(null),o(!0),p(!1);return}if("layerIndex"===e.type){c(e.layer),o(!1),p(!1);return}p(!0)},"data-sentry-element":"LayerDataInput","data-sentry-source-file":"AddCustomLayer.tsx"}),i&&!u&&(0,a.Y)(e_,{layer:i,onChange:e=>{y(Object.keys(e).reduce((t,r)=>{let a=new RegExp("{".concat(r,"(:[a-z,A-Z,0-9]+)?}"));return t.replace(a,e[r])},i.url.replace("{zoom}","{z}")))},onValidation:e=>{o(!e)}}),u&&(0,a.Y)(eB,{onChange:e=>{y(e.url),c(e)},onValidation:e=>{o(!e)}}),(0,a.FD)(eu.A,{"data-sentry-element":"DialogActions","data-sentry-source-file":"AddCustomLayer.tsx",children:[(0,a.Y)(es.A,{onClick:f,"data-sentry-element":"Button","data-sentry-source-file":"AddCustomLayer.tsx",children:"Cancel"}),(0,a.Y)(es.A,{onClick:()=>{t({...i,url:d}),f()},color:"primary",variant:"contained",disabled:l,"data-sentry-element":"Button","data-sentry-source-file":"AddCustomLayer.tsx",children:"Save"})]})]})]})},eE=e=>{let{url:t,html:r,text:a}=e;return r||(a&&t?'<a href="'.concat(t,'">').concat(a,"</a>"):a||t)},eT=()=>{let{setActiveLayers:e,setUserLayers:t}=(0,v.OF)(),[r,s]=(0,n.useState)(!1);return(0,a.FD)(a.FK,{children:[(0,a.Y)(m.A,{m:2,mt:6,"data-sentry-element":"Box","data-sentry-source-file":"AddLayerButton.tsx",children:(0,a.Y)(es.A,{size:"small",color:"secondary",onClick:()=>s(!0),"data-sentry-element":"Button","data-sentry-source-file":"AddLayerButton.tsx",children:(0,b.t)("layerswitcher.add_layer_button")})}),(0,a.Y)(ez,{onClose:()=>s(!1),isOpen:r,save:r=>{let{url:a,name:n,max_zoom:s,min_zoom:l,attribution:o,bbox:i,category:c}=r,d={type:"user",maxzoom:s,minzoom:l,name:n,url:a,bboxes:i,isSatelite:"photo"===c,...o&&{attribution:[eE(o)]}};t(e=>[...e.filter(e=>e.url!==a),d]),e([a])},"data-sentry-element":"AddCustomDialog","data-sentry-source-file":"AddLayerButton.tsx"})]})};var eM=r(8696),eR=r(49899);let ej=()=>(0,a.Y)(eM.A,{title:"Not visible currently",arrow:!0,placement:"top-end","data-sentry-element":"Tooltip","data-sentry-component":"OutsideOfView","data-sentry-source-file":"BaseLayers.tsx",children:(0,a.Y)(eR.A,{fontSize:"small",color:"secondary","data-sentry-element":"WarningIcon","data-sentry-source-file":"BaseLayers.tsx"})}),eG=(e,t)=>e&&!e.some(e=>S(t,e)),eP=e=>{let{layer:t}=e,{view:r,activeLayers:n,setActiveLayers:s}=(0,v.OF)(),{key:l,name:o,type:i,url:c,Icon:d,bboxes:y,secondLine:u}=t,p=n.includes(l),m=eG(y,r);return(0,a.Y)(a.FK,{children:(0,a.FD)(N,{selected:p,onClick:()=>{s(e=>[l,...e.slice(1)])},"data-sentry-element":"ListItemButton","data-sentry-source-file":"BaseLayers.tsx",children:[(0,a.Y)(Y,{Icon:d,"data-sentry-element":"LayerIcon","data-sentry-source-file":"BaseLayers.tsx"}),(0,a.Y)(U.A,{primary:o,secondary:p&&u?u:void 0,"data-sentry-element":"ListItemText","data-sentry-source-file":"BaseLayers.tsx"}),m&&(0,a.Y)(ej,{}),"user"===i&&(0,a.Y)(A,{url:c})]},l)})},eK=e=>{let{baseLayers:t}=e;return(0,a.Y)(C,{dense:!0,suppressHydrationWarning:!0,"data-sentry-element":"StyledList","data-sentry-component":"BaseLayers","data-sentry-source-file":"BaseLayers.tsx",children:t.map(e=>"spacer"===e.type?(0,a.Y)(w,{},e.key):(0,a.Y)(eP,{layer:e},e.key))})};var eN=r(82097);let eU=(e,t)=>{let r=e=>{let[t,r]=e;return{...r,key:t}},a=Object.entries(F.$).filter(e=>{let[r,a]=e;return!a.bboxes||a.bboxes.some(e=>S(t,e))}),n=a.filter(e=>{let[,t]=e;return"basemap"===t.type}),s=a.filter(e=>{let[,t]=e;return t.type.startsWith("overlay")});return{basemapLayers:[...n.map(r),...e.length?[{type:"spacer",key:"userSpacer"}]:[],...e.map(e=>({...e,key:e.url,Icon:y}))],overlayLayers:s.map(r)}},eV=()=>{let{view:e,userLayers:t}=(0,v.OF)(),{basemapLayers:r,overlayLayers:n}=eU(t,e);return(0,a.FD)(a.FK,{children:[(0,a.Y)(L,{"data-sentry-element":"LayersHeader","data-sentry-source-file":"LayerSwitcherContent.tsx"}),(0,a.Y)(eN.A,{"data-sentry-element":"Divider","data-sentry-source-file":"LayerSwitcherContent.tsx"}),(0,a.Y)(eK,{baseLayers:r,"data-sentry-element":"BaseLayers","data-sentry-source-file":"LayerSwitcherContent.tsx"}),(0,a.Y)(en,{overlayLayers:n,"data-sentry-element":"Overlays","data-sentry-source-file":"LayerSwitcherContent.tsx"}),(0,a.Y)(eT,{"data-sentry-element":"AddUserLayerButton","data-sentry-source-file":"LayerSwitcherContent.tsx"})]})};var eW=r(7831);let eH=e=>{(0,n.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e])},eX=()=>{let[e,t,r]=(0,o.lC)(!1),n=(0,s.A)(o.xl);return eH(r),(0,a.FD)("div",{"data-sentry-component":"LayerSwitcher","data-sentry-source-file":"LayerSwitcher.tsx",children:[(0,a.Y)(i.b,{onClick:e?r:t,isOpened:e,"data-sentry-element":"LayerSwitcherButton","data-sentry-source-file":"LayerSwitcher.tsx"}),(0,a.Y)(l.A,{anchor:"right",open:e,onClose:r,onOpen:t,variant:n?"persistent":"temporary",disableBackdropTransition:!0,disableSwipeToOpen:!0,sx:{pointerEvents:"all"},"data-sentry-element":"SwipeableDrawer","data-sentry-source-file":"LayerSwitcher.tsx",children:(0,a.FD)("div",{role:"presentation",style:{width:"280px",height:"100%"},children:[(0,a.Y)(eW.F,{right:!0,onClick:r,style:{top:13},"data-sentry-element":"ClosePanelButton","data-sentry-source-file":"LayerSwitcher.tsx"}),(0,a.Y)(eV,{"data-sentry-element":"LayerSwitcherContent","data-sentry-source-file":"LayerSwitcher.tsx"})]})})]})}}}]);